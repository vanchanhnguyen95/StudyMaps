https://127.0.0.1:9200/


Cài đặt elastic theo link:
https://www.elastic.co/guide/en/elasticsearch/reference/current/zip-windows.html
https://www.youtube.com/watch?v=BybAetckH88
https://github.com/soumilshah1995/learning-logstash-and-elastic-search-plugins/blob/main/ELKStack8.3/readme.md

**************
Generate an enrollment token for Kibana instances with
'bin\elasticsearch-create-enrollment-token -s kibana'.

warning: ignoring JAVA_HOME=C:\Program Files\Java\jdk1.8.0_331; using bundled JDK
eyJ2ZXIiOiI4LjYuMSIsImFkciI6WyIxMC4wLjIwLjIwOjkyMDAiXSwiZmdyIjoiYWU5YjExYjFhZmJhZGE3NzllY2I3NGEzZmYwYTc4MDE2NWRkMmRkOTBhYTY5ZTI1M2YyN2VkN2IzZjk1MDU0MiIsImtleSI6IkU5bUxKWVlCdlQzSW9lRWh0U2k0OjRiZG54WlM2UWltZTE2NXEySk5FOEEifQ==


curl -XPOST 'http://jfblouvmlxecs01:9200/test/_doc/1' -d @lane.json
curl -XPOST localhost:9200/books/book/_bulk --data-binary @sample-data.json -H "Content-Type: application/json"
curl -XPOST http://localhost:9200/project/_doc -H "Content-Type: application/json" -d @ahmet.json

curl -XPOST 'localhost:9200/books/book/_bulk' -d @lane.json

logstash.bat -f .\config\logstash-sample.conf --config.reload.automatic
logstash -f .\config\logstash-sample.conf --config.reload.automatic


http://elastic:NlPYZIUsFzkRivtq-wWC@localhost:9200


bin/elasticsearch-plugin install file://target/releases/elasticsearch-analysis-vietnamese-7.17.1.zip
./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.3.0/elasticsearch-analysis-ik-6.3.0.zip

elasticsearch-plugin install file:///usr/share/elasticsearch/elasticsearch-analysis-vietnamese-5.3.1.zip
elasticsearch-plugin install file:///C:/Users/chanhnv/Desktop/examp/elasticsearch-analysis-vietnamese-8.6.1.zip

elasticsearch-plugin install file:///usr/share/elasticsearch/elasticsearch-analysis-vietnamese-8.5.1.zip
elasticsearch-plugin install analysis-icu

mingw32-make

Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project elasticsearch-analysis-vietnamese: Fatal error compiling: invalid flag: --release -> [Help 1]

- Gen password elastic: elasticsearch-reset-password -u elastic
[elastic] / 8+9E-4gYmhFI3hTSBFa6
- Gen password kibana_system: elasticsearch-reset-password -u kibana_system
[kibana_system] / Zn49Ef1+QcgBbicRp96C

## Lỗi đọc đọc filepath ubuntu trên terminal
ubuntu2204.exe

## Kích hoạt wsls 2:
https://quantrimang.com/cong-nghe/cai-windows-subsystem-for-linux-2-170819
Thêm chỗ này mới set version bên ubuntu 2 đc
https://github.com/MicrosoftDocs/WSL/issues/487


# Cài đặt elastic theo DuyDo:
https://github.com/duydo/elasticsearch-analysis-vietnamese/issues/111

## Cập nhật các gói tron ubuntu
sudo apt update && sudo apt upgrade

### Thông tin ubuntu
username: chanhnguyen / 123456
Truy cập vào ubuntu: \\wsl$

## Nhìn được số hiệu phiên bản của hệ điều hành
uname -a

## cập nhật cho ubuntu đầu tiên
sudo apt update -y

-- xóa toàn màn hình

mv elasticsearch-7.12.1-linux-x86_64 /es
mv elasticsearch-7.12.1/es
D:\WSL\elasticsearch-7.12.1

C:\Users\chanhnv\AppData\Local\Microsoft\WindowsApps

## Xóa một file trên Linux

## Xóa thư mục không trống:
rm -r elasticsearch-analysis-vietnamese

## Truy cập đến thư mục wsl
https://tek4.vn/cach-truy-cap-tep-linux-wsl-tren-windows-10

## Di chuyển đến thư mục home
 cd ../home
 cd ./chanhnguyen/
 
 https://issueantenna.com/repo/dvdieu/elasticsearch-analysis-vietnamese
 https://github.com/wokaio/elasticsearch-analysis-vietnamese
 
 https://github.com/elastic/elasticsearch/releases
 
 mv elasticsearch-7.3.1/es
 mv elasticsearch-7.3.1 /es
 
 cd ../es
 
 https://viblo.asia/p/elasticsearch-kibana-logstash-tong-quan-cai-dat-va-su-dung-RQqKLRn6l7z#_elasticsearch-va-kibana-2
 
 apt install cmake
 
 # Cài đặt kibana
 https://viblo.asia/p/cai-dat-va-su-dung-kibana-trong-ubuntu-aWj53k4P56m
 

 curl -O https://artifacts.elastic.co/downloads/kibana/kibana-7.3.1-linux-x86_64.tar.gz
 curl https://artifacts.elastic.co/downloads/kibana/kibana-7.3.1-linux-x86_64.tar.gz.sha512 | shasum -a 512 -c -
 tar -xzf kibana-7.3.1-linux-x86_64.tar.gz
 cd kibana-7.3.1-linux-x86_64/
 
 curl -O https://artifacts.elastic.co/downloads/kibana/kibana-7.3.2-darwin-x86_64.tar.gz
 
 
 var response = await _elasticClient.SearchAsync<HealthCareModel>(s => s
.Query(q => q
.Match(m => m
.Field(f => f.KeyWords)
.Query(term).Analyzer("my_analyzer").Fuzziness(Fuzziness.Auto))).From((page - 1) * pageSize).Size(pageSize).Sort(s =>s.Descending(SortSpecialField.Score)).MinScore(0.4)
).ConfigureAwait(false)


PUT /healthcare
{
 "settings": {
 "analysis": {
 "analyzer": {
 "my_analyzer": {
 "tokenizer": "vi_tokenizer",
 "char_filter": [ "html_strip" ,"healhcareES_custom"],
 "filter": [
 "icu_folding"]
	}
 },
 "char_filter": {
 "my_mappings_char_filter": {
 "type": "mapping",
 "mappings": [
 "Bs=> Bác sĩ",
 "bs=> Bác sĩ",
 "BS => Bác sĩ",
 "Bac si=>Bác sĩ",
 "bac si=>Bác sĩ",
 "PK=>Phòng khám",
 "pk=>Phòng khám",
 "phong kham=>Phòng khám",
 "BV=> Bệnh viện",
 "bv=> Bệnh viện",
 "TMH=>Tai mũi họng",
 "tmh=>Tai mũi họng",
 "RHM=> Răng hàm mặt",
 "rhm=> Răng hàm mặt",
 "X-ray=> X quang",
 "x-quang=> X quang",
 "Sản phụ khoa=> khám thai"
 ]
 }
 }
 }
 }
}

GET healthcare/_analyze 
{
 "analyzer": "vn_analyzer", 
 "text": "bs"
}

//• Tìm kiếm theo từ khóa bất kỳ với tiếng Việt có dấu
//• Tìm kiếm từ khóa bất kỳ với tiếng Việt không dấu
//• Tìm kiếm bao gồm tiếng Việt có dấu và không dấu
//• Tìm kiếm chính xác từ khóa

//• Tìm kiếm các từ khóa có từ viết tắt như “bs” hoặc “bv” hoặc những từ khóa chuyên khoa đã cấu hình sẵn như “tmh”…
//• Tìm kiếm với gợi ý(Autocomplete) có sử dụng fuzzy trong ElasticSearch
//• Tìm kiếm theo GEO có cấu hình giới hạn về khoảng cách, phạm vi cần tìm
//• Tìm kiếm theo GEO và có từ khóa kèm theo
//• Tìm kiếm theo tỉnh

GET healthcare2/_analyze 
{
 "analyzer": "vn_analyzer", 
 "text": "bs"
}

            
var geo = await _elasticClient.SearchAsync<HealthCareModel>(s =>
s.From(0).Size(pageSize)//.ScriptFields(sf => sf.ScriptField("distance", d =>
d.Source("if(doc['geo'].size(){doc['geo'].arcDistance(" + lat + "," + ln + ")}")))

.Query(q => q

.GeoDistance(g => g
.Boost(1.1)
.Name("named_query")
.Field(p => p.GeoLocation)

.DistanceType(type)
.Location(lat, ln)
.Distance(distance)
.ValidationMethod(GeoValidationMethod.IgnoreMalformed)
))
);